{% extends "base.html" %}

{% block body_class %}page-gold{% endblock %}

{% block content %}
<section class="rl-wizard">

  <!-- Header -->
  <header class="rl-wizard-header">
    <h1 class="rl-wizard-title">Buchung Transporter</h1>
    <p class="rl-wizard-subtitle">Buchen Sie einen Transporter f√ºr Ihre Umzugsbed√ºrfnisse</p>
  </header>

  <div class="rl-progress-single">
    <div class="rl-progress-single__top">
      <span class="rl-progress-single__label">Zusatzoptionen</span>
      <span class="rl-progress-single__step">Schritt 3 von 5</span>
    </div>
    <div class="rl-progress-track">
      <span class="rl-progress-fill" style="width: 60%;"></span>
    </div>
  </div>

  <!-- Karte: Zus√§tzliche Optionen -->
  <section class="rl-wizard-card">
    <header class="rl-wizard-card__header">
      <h2 class="rl-card__title">Zus√§tzliche Optionen</h2>
      <p class="rl-card__subtitle">F√ºgen Sie optionale Ausr√ºstung und Services hinzu</p>
    </header>

    <form method="post" class="rl-wizard-body">
      {% csrf_token %}

      <!-- Additional Equipment & Services -->
      <div class="rl-options-section">
        <div class="rl-options-grid">
          {% if extras %}
            {% for extra in extras %}
              <label class="rl-option-card">
                <input type="checkbox"
                      name="extras"
                      value="{{ extra.key }}"
                      class="rl-option-card__input"
                      {% if extra.key in selected_extras %}checked{% endif %}>
                <div class="rl-option-card__inner">
                  <div class="rl-option-card__icon"><span class="rl-option-card__glyph">üß©</span></div>
                  <div class="rl-option-card__body">
                    <div class="rl-option-card__title">{{ extra.name }}</div>
                    <div class="rl-option-card__text">{{ extra.description }}</div>
                    <div class="rl-option-card__price">CHF {{ extra.price|floatformat:2 }}</div>
                  </div>
                </div>
              </label>
            {% endfor %}
          {% else %}
            <p class="rl-text-muted">Aktuell sind keine Zusatzoptionen verf√ºgbar.</p>
          {% endif %}
        </div>
      </div>

      <!-- Additional Notes -->
      <div class="rl-options-notes">
        <label for="id_additional_notes" class="form-label">Notiz</label>
        <textarea id="id_additional_notes"
          name="additional_notes"
          class="form-textarea"
          rows="4"
          placeholder="Gibt es besondere W√ºnsche oder Informationen, die wir wissen sollten?">{{ booking.additional_notes|default:'' }}</textarea>
        <p class="form-help">Teilen Sie uns bitte mit, wenn Sie besondere Anforderungen haben.</p>
      </div>

      <!-- Footer Buttons -->
      <footer class="rl-wizard-footer">
        <a href="{% url 'booking_create' transporter.id %}" class="btn rl-btn-secondary">‚Üê Zur√ºck</a>
        <button type="submit" class="btn rl-btn-primary">Weiter ‚Üí</button>
      </footer>
    </form>
  </section>
</section>
{% endblock %}
